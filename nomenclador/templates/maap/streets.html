{% extends 'maap/base.html' %}
{% block title %}
Busqueda de calles
{% endblock %}

{% block js_onload %}

        // Show layer event handler
        $('.show-layer').click(function () {
            button = $(this)
            parent = button.parent()
            url = button.attr('href');
            state.loadLayer(url,false, function(layer){
                layer.show();

                // toogle view
                parent.children('.hide-layer').css('display','inline');
            
            });
            
            return false;
        });


        // Hide layer event handler
        $('.hide-layer').click(function () {
            parent = $(this).parent()
            id = parent.attr('id');
            
            state.layers[id].hide();   

            // toogle view
            parent.children('.show-layer').css('display','inline');
            $(this).css('display','none');
            
            return false;
        })
{% endblock %}

</head>
<body>
{% block listing %}
{% if results %}
<h3> Resultados </h3>
<dl>
    {% for result in results %}    
    <dt >
    <a class="show-layer" 
       href="{% url maap.views.street_location %}?{{result.url_params}}">{{result.name}}</a>

    </dt>
    <dd>{{result.old}}</dd>
    {% endfor %}
</dl>
{% else%}{%if request.POST %}
<h3>No hay resultados</h3>
{% endif %}{% endif %}

{% endblock %}


</body>
</body>


