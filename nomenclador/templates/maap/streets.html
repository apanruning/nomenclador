{% extends 'maap/base.html' %}
{% block title %}
Busqueda de calles
{% endblock %}

{% block js_onload %}

        // Show layer event handler
        $('.show-layer').click(function () {
            button = $(this)
            parent = button.parent()
            url = button.attr('href');
            state.loadLayer(url,false, function(layer){
                layer.show();

                // toogle view
                parent.children('.hide-layer').css('display','inline');
            
            });
            
            return false;
        });


        // Hide layer event handler
        $('.hide-layer').click(function () {
            parent = $(this).parent()
            id = parent.attr('id');
            
            state.layers[id].hide();   

            // toogle view
            parent.children('.show-layer').css('display','inline');
            $(this).css('display','none');
            
            return false;
        })
{% endblock %}

</head>
<body>
{% block listing %}
{% if intlist or strlist %}
<h3> Resultados </h3>
<ul>
        {% for il in intlist %}    
        <li >
        <a class="show-layer" 
           href="{% url maap.views.street_location %}?str={{il.0}}&int={{il.1}}">{{il.0}} Int. {{il.1}}</a>
        </li>
        {% endfor %}
    {% if POST.streetnumber %}
        {% for il in strlist %}    
        <li >
        <a class="show-layer"
           href="{% url maap.views.street_location %}?str={{il.0}}&door={{POST.streetnumber}}">{{il.0}}  {{POST.streetnumber}}</a>
        </li>
        {% endfor %}
    {% else %}
        {% for il in strlist %}    
        <li >
        <a class="show-layer"
           href="{% url maap.views.street_location %}?str={{il.0}}">{{il.0}}</a>
        </li>
        {% endfor %}
    {% endif %}
</ul>
{% else%}{%if request.POST %}
<h3>No hay resultados</h3>
{% endif %}{% endif %}

{% endblock %}


</body>
</body>


